# Секретарь-бот telegram

## Описание

Получает информацию о событиях из разных систем компании gitlab, argoCD и отправляет нужные сообщения подписавшимся разработчикам в telegram.

## Для чего?

В почту редко кто смотрит, также в почту летят все сообщения без разбора. Хотелось бы более тонкой настройки какие сообщения нужны, а какие нет и более мобильный и удобный мессенджер.

## Подключение к БД

Должна быть установлена переменная окружения **DB_CONN** вида `postgresql://pahanini@localhost:5432/secretary_bot`
для тестовой БД **TEST_DB_CONN**

### Миграции

Накатить `make migrate` и `make migrate-test`, переменные окружения считываются из `.env`

## Линтер 

- `make lint` - запуск линтера
- `make fix` - запуск линтера с попыткой исправить ошибки

### Тестирование

`make test` - запускает тесты и формирует отчет о покрытии тестами в `cover.html`. 

Отчет сформированный gitlab лежит здесь http://dev-dep.gitlab.sima-land.ru/secretary-bot/#file0